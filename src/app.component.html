
<div class="flex h-screen bg-slate-100">
  <!-- Sidebar -->
  <aside class="w-64 bg-white border-r border-slate-200 p-6 flex flex-col">
    <header class="flex items-center gap-3 mb-10">
      <div class="bg-indigo-600 text-white p-2 rounded-lg">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-7 h-7">
          <path stroke-linecap="round" stroke-linejoin="round" d="M12 18.75a6 6 0 006-6v-1.5m-6 7.5a6 6 0 01-6-6v-1.5m6 7.5v3.75m-3.75 0h7.5M12 15.75a3 3 0 01-3-3V4.5a3 3 0 116 0v8.25a3 3 0 01-3 3z" />
        </svg>
      </div>
      <h1 class="text-2xl font-bold text-slate-800" style="font-family: 'Poppins', sans-serif;">MateGenio</h1>
    </header>
    <nav class="flex flex-col gap-2">
      @for (topic of topics(); track topic.id) {
        <button 
          (click)="selectTopic(topic)"
          [class]="'flex items-center gap-4 p-3 rounded-lg text-left transition-all duration-200 ' + (selectedTopic()?.id === topic.id ? 'bg-indigo-100 text-indigo-700 font-semibold' : 'hover:bg-slate-100 text-slate-600')">
          <span [innerHTML]="topic.icon" class="w-6 h-6"></span>
          <span>{{ topic.title }}</span>
        </button>
      }
    </nav>
    <footer class="mt-auto text-center text-xs text-slate-400">
      <p>Creado con ❤️ para aprender.</p>
    </footer>
  </aside>

  <!-- Main Content -->
  <main class="flex-1 p-8 overflow-y-auto">
    @if (selectedTopic(); as topic) {
      <div class="max-w-4xl mx-auto">
        <!-- Topic Header -->
        <header class="mb-8">
          <h2 class="text-4xl font-bold text-slate-900 mb-2" style="font-family: 'Poppins', sans-serif;">{{ topic.title }}</h2>
          <p class="text-slate-500 text-lg">{{ topic.explanation }}</p>
        </header>

        <!-- Example Section -->
        <section class="mb-12">
          <div class="bg-white p-6 rounded-xl shadow-sm border border-slate-200">
            <h3 class="text-2xl font-semibold text-indigo-700 mb-4 flex items-center gap-3">
              <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6"><path stroke-linecap="round" stroke-linejoin="round" d="M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9z" /></svg>
              {{ topic.example.title }}
            </h3>
            <p class="text-xl font-mono bg-slate-100 p-4 rounded-md text-slate-700 text-center mb-4">{{ topic.example.problem }}</p>
            <div class="space-y-2 text-slate-600">
              @for (step of topic.example.steps; track $index) {
                <p class="font-mono text-sm leading-relaxed">{{ step }}</p>
              }
            </div>
          </div>
        </section>

        <!-- Activities Section -->
        <section>
          <h3 class="text-3xl font-bold text-slate-900 mb-6" style="font-family: 'Poppins', sans-serif;">Actividades Sugeridas</h3>
          <div class="space-y-6">
            @for (activity of topic.activities; let i = $index; track i) {
              <div class="bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden">
                <div class="p-6">
                  <p class="text-lg font-medium text-slate-800 mb-4">
                    <span class="font-bold text-indigo-600">Actividad {{ i + 1 }}:</span> {{ activity.problem }}
                  </p>
                  <button (click)="toggleSolution(i)" class="inline-flex items-center gap-2 px-4 py-2 text-sm font-medium text-indigo-700 bg-indigo-100 rounded-md hover:bg-indigo-200 transition-colors">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5">
                      <path stroke-linecap="round" stroke-linejoin="round" d="M9.879 7.519c1.171-1.025 3.071-1.025 4.242 0 1.172 1.025 1.172 2.687 0 3.712-.203.179-.43.326-.67.442-.745.361-1.45.999-1.45 1.827v.75M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9 5.25h.008v.008H12v-.008z" />
                    </svg>
                    <span>{{ visibleSolutions().get(i) ? 'Ocultar Solución' : 'Mostrar Solución Paso a Paso' }}</span>
                  </button>
                </div>
                
                @if (visibleSolutions().get(i)) {
                  <div class="bg-emerald-50 border-t border-emerald-200 p-6">
                    <h4 class="font-semibold text-emerald-800 mb-3">Solución Detallada:</h4>
                    <div class="space-y-2 text-emerald-700">
                      @for (step of activity.solution; track $index) {
                        <p class="font-mono text-sm">{{ step }}</p>
                      }
                    </div>
                  </div>
                }
              </div>
            }
          </div>
        </section>
      </div>
    } @else {
      <div class="flex items-center justify-center h-full">
        <p class="text-xl text-slate-500">Selecciona un tema para comenzar a aprender.</p>
      </div>
    }
  </main>
</div>
